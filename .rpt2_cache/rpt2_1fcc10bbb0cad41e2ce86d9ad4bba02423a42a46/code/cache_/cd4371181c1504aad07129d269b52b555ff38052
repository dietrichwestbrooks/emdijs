{"code":"import { EmdiClient } from './emdi-client';\r\nimport { take } from 'rxjs/operators';\r\nvar _client = null;\r\nexport function connect(deviceId, accessToken) {\r\n    if (_client) {\r\n        return Promise.resolve(_client);\r\n    }\r\n    var client = new EmdiClient();\r\n    return new Promise(function (resolve, reject) {\r\n        client.connect(deviceId, accessToken).then(function () {\r\n            client.connected$\r\n                .pipe(take(1))\r\n                .subscribe(function (connected) {\r\n                if (connected) {\r\n                    _client = client;\r\n                    resolve(client);\r\n                }\r\n                else {\r\n                    reject(new Error('Failed to connect'));\r\n                }\r\n            });\r\n            client.error$\r\n                .pipe(take(1))\r\n                .subscribe(function (err) {\r\n                return reject(new Error(err.error.toString()));\r\n            });\r\n            client.disconnected$\r\n                .pipe(take(1))\r\n                .subscribe(function () { return _client = null; });\r\n        }, function (err) { return reject(err); });\r\n    });\r\n}\r\n//# sourceMappingURL=connect.js.map","map":"{\"version\":3,\"file\":\"connect.js\",\"sourceRoot\":\"\",\"sources\":[\"../../../project/src/connect.ts\"],\"names\":[],\"mappings\":\"AAAA,OAAO,EAAE,UAAU,EAAE,MAAM,eAAe,CAAC;AAE3C,OAAO,EAAE,IAAI,EAAE,MAAM,gBAAgB,CAAC;AAEtC,IAAI,OAAO,GAAwB,IAAI,CAAC;AAExC,MAAM,kBAAkB,QAAgB,EAAE,WAAmB;IACzD,EAAE,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC;QACV,MAAM,CAAC,OAAO,CAAC,OAAO,CAAC,OAAO,CAAC,CAAC;IACpC,CAAC;IAED,IAAM,MAAM,GAAG,IAAI,UAAU,EAAE,CAAC;IAEhC,MAAM,CAAC,IAAI,OAAO,CAAa,UAAC,OAAO,EAAE,MAAM;QAE3C,MAAM,CAAC,OAAO,CAAC,QAAQ,EAAE,WAAW,CAAC,CAAC,IAAI,CAAC;YACvC,MAAM,CAAC,UAAU;iBACZ,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;iBACb,SAAS,CAAC,UAAA,SAAS;gBAChB,EAAE,CAAC,CAAC,SAAS,CAAC,CAAC,CAAC;oBACZ,OAAO,GAAG,MAAM,CAAC;oBACjB,OAAO,CAAC,MAAM,CAAC,CAAC;gBACpB,CAAC;gBAAC,IAAI,CAAC,CAAC;oBACJ,MAAM,CAAC,IAAI,KAAK,CAAC,mBAAmB,CAAC,CAAC,CAAC;gBAC3C,CAAC;YACL,CAAC,CAAC,CAAC;YAEP,MAAM,CAAC,MAAM;iBACR,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;iBACb,SAAS,CAAC,UAAA,GAAG;gBACV,OAAA,MAAM,CAAC,IAAI,KAAK,CAAC,GAAG,CAAC,KAAK,CAAC,QAAQ,EAAE,CAAC,CAAC;YAAvC,CAAuC,CAAC,CAAC;YAEjD,MAAM,CAAC,aAAa;iBACf,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;iBACb,SAAS,CAAC,cAAM,OAAA,OAAO,GAAG,IAAI,EAAd,CAAc,CAAC,CAAC;QACzC,CAAC,EAAE,UAAA,GAAG,IAAI,OAAA,MAAM,CAAC,GAAG,CAAC,EAAX,CAAW,CAAC,CAAC;IAC3B,CAAC,CAAC,CAAC;AACP,CAAC\"}","dts":{"name":"C:/Aristocrat/Projects/emdijs/lib/src/connect.d.ts","text":"import { EmdiClient } from './emdi-client';\r\nexport declare function connect(deviceId: number, accessToken: number): Promise<EmdiClient>;\r\n"}}
